# [2026-01-04 시작] 72시간 슬롯 A/B/C 운영 플랜


[운영 중 모니터링]
- 1일차: 문의 폭주 여부(“왜 안 올라가요?”) 확인
- 2~3일차: 재방문률/스트릭 분포 확인(가능하면)
- 장애 시: 임시 안내 + 원복/보상 정책 실행
[FAQ(유저가 물어볼 것)]
- Q. 하루에 몇 번 해야 해요?  A. 하루에 한 번만 플레이하면 돼요.
- Q. 언제 초기화돼요?          A. 매일 00:00 기준이에요. (시간대 함께)
- Q. 하루 놓치면 어떻게 돼요?  A. 연속 기록이 끊기고 다시 1부터예요. (정책대로)

[제목] 연속 접속(스트릭) 기능이 열렸어요
[본문]
- 하루에 한 번만 플레이하면 ‘연속 기록’이 1씩 올라가요.
- 매일 꾸준히 접속해서 기록을 이어가 보세요.
- 기준 시간: 매일 00:00
[보상 안내]
- 오픈 기념 보상은 즉시 공개 예정이에요.
[사전 준비]
- 테스트 계정 2개 준비: A(오늘 처음), B(이미 연속 기록 있음/없음)
- 관리자 페이지에서 해당 유저의 play_streak 확인 가능한지
[시나리오]
1) 기본 증가
- A로 게임 1회 플레이 → play_streak가 1 증가(또는 1로 설정)하는지 확인
2) 같은 날 재접속
- A로 당일 게임을 여러 번 플레이 → play_streak가 추가로 또 오르지 않는지 확인(하루 1회 증가)
3) 날짜 변경
- 자정(KST 00:00) 이후 첫 게임 플레이 시 play_streak 처리(유지/끊김) 기대값 확인
4) 심야 체크인(추후 이벤트용)
- 23:59 이전 플레이가 당일로 인정되는지 확인
- 시간대가 서버(KST) 기준인지 확인



SLOT-B
[이벤트명] 골든 아워 (Golden Hour) ✅ 구현 완료 (VaultService /
SLOT-A
[이벤트명] 연속 접속(스트릭) 오픈 이벤트
[한 줄 소개] - 매일 1회 이상 게임을 플레이하면 연속 기록이 쌓이고, 기록에 따라 혜택이 생깁니다.
[목표]
- 유저에게 “연속 접속(스트릭)” 개념을 처음 소개한다
- 일일 재방문 습관을 만든다
[기간]
- 시작: 2026-01-05 (월) 00:00
- 종료: 2026-01-12 (월) 23:59
[기준 시간대: KST]
[참여 조건]
- 하루 1회 이상 **게임 플레이(PLAY_GAME)** 하면 그날은 출석 인정
- 연속으로 플레이하면 스트릭이 1씩 증가 (**하루 1회만 증가**)
- **리셋 기준: KST 00:00** (서버 기준, `STREAK_DAY_RESET_HOUR_KST=0`)

[유저 화면 노출(미정이면 “확인 필요”로 표기)]
- 스트릭 숫자 노출 위치: (예: 마이페이지 / 홈 / 프로필) (확인 필요)
- 안내 문구 노출: (팝업/배너/공지) (확인 필요)

[보상 설계]  ← **현재: 어드민에서 Day별 보상 규칙 편집 가능(운영툴 구현 완료)**
- 기본 자동지급(디폴트): **Day3 / Day7**
  - Day3: 룰렛/다이스/복권 티켓 번들(기본값)
  - Day7: 다이아 1(기본값)
- 변경/확장: 어드민에서 **Day별 보상 규칙을 추가/삭제/저장** 가능
  - 운영 경로: 관리자 화면 `/admin/streak-rewards` ("스트릭 보상 운영")
  - 저장 위치: `app_ui_config` key=`streak_reward_rules`
- 증빙/감사 로그:
  - 지급(grant): `UserEventLog`에 `streak.reward_grant.{3|7}.{YYYY-MM-DD}`
  - 중복 스킵(skip): `UserEventLog`에 `streak.reward_skip.{3|7}.{YYYY-MM-DD}`

[운영 체크(실행 전)]
- 실제로 스트릭 값이 올라가는지 테스트 완료
- 하루 경계(자정)에서 끊김/연장 로직 확인
- 서버 시간대/클라이언트 시간대 차이로 오해 생길 여지 확인
- 이슈 발생 시 공지 문구(사과/보상/연장) 초안 준비 Admin Board)
[한 줄 소개]
- 매일 밤 21:30부터 딱 1시간, 금고적립 2배 부스트와 특별 보상이 쏟아집니다.
[목표]
- 야간 피크 타임(21:30~22:30) 동시 접속자(CCU) 극대화
- "이 시간엔 무조건 접속해야 이득"이라는 유저 습관 형성
[기간]
- 매일 21:30 ~ 22:30 (KST 기준)
- 상태: 상시 운영 (일단 72시간 집중 모니터링)
[참여 조건(핵심 규칙)]
- 이벤트 시간 내 접속하여 게임(슬롯/다이스 등) 플레이 시 자동 적용
- (옵션) 골든 티켓은 해당 시간 내 1회 이상 입금한 유저 중 추첨
[유저 화면 노출]
- 진입 시: 골든 아워 활성화 안내 전면 팝업 + 상단 실시간 카운트다운 타이머
- 푸시 알림: 21:30 정각 "🌙 골든 아워 시작! 지금 접속하세요!" 타겟팅 발송
[보상 설계]
- **기본 혜택**: 기본게임 승리200원 패배 -50원 조건인 게임 플레이시 금고적립 **2.0x 배수** 적용 (수동/관리자가 금고기능에서 진행)
- **특별 혜택**: 참여자 중 매일 3명 추첨 '골든 티켓' 지급
- **지급 방식**: 배수는 즉시 적용, 경품은 익일 지급 혹은 실시간 당첨 (정책 확인 필요- 조언필요)
[운영 체크(실행 전)]
- 어드민에서 `Golden Hour` 상태를 수동/자동으로 켤 수 있는지 확인
- 배수(Multiplier)가 1.0x -> 2.0x로 정상 변경되는지 테스트 / 차감되는 음수도 2배 되는지 확인 
- 서버 시간(KST)과 클라이언트 타이머 동기화 체크
[운영 중 모니터링]
- 시작 직후(21:30): `is_golden_hour_active: ON` (초록불) 확인
- 진행 중: 실시간 동시 접속자 수 및 게임 플레이 로그 급증 확인
- 종료 직후(22:30): 배수가 1.0x로 정상 복귀되었는지 확인
[FAQ(유저가 물어볼 것)]
- Q. 그냥 접속만 하고 있어도 되나요?  A. 게임을 플레이해야 배수 혜택을 받아요.
- Q. 22:30에 시작한 판은요?          A. 게임 시작 시각 기준 22:30 이전이어야 인정돼요.
- Q. 골든 티켓 당첨은 언제 알 수 있나요?  A. (지급 정책에 따라 추후 공지)

[기술 사양 및 경로]
- **백엔드 로직**: `app/services/vault_service.py` (배수 로직), `app/services/vault2_service.py` (설정 제어)
- **상세 테스트 파일**: `tests/test_vault_earn_event_game.py` (KST 시간대 및 배수 적용 검증)
- **UI 구성 및 경로**:
  - 진입 팝업: `src/components/events/GoldenHourPopup.tsx`
  - 카운트다운 타이머: `src/components/layout/GoldenHourTimer.tsx`
  - 헤더 통합: `src/components/layout/AppHeader.tsx`
  - 어드민 제어 보드: `src/admin/pages/VaultAdminPage.tsx`

**[실제 구현 완료 및 검증 사항 (2026-01-04)]**
- **승패 페널티 강화 (음수 배수 적용)**: 이제 골든 아워 중 패배 시 -50원이 -100원으로 정상적으로 2배 차감됩니다. (`VaultService.py` 수정)
- **200원/50원 배수 게이트 적용**: 기본 게임 보상(200원 승리 / -50원 패배)인 경우에만 골든 아워 2배 부스트가 작동하도록 제한하여, 타 보너스 금액에 배수가 중복 적용되는 것을 방지했습니다.
- **자동 검증 완료**: `pytest`를 통해 패배 시 -100원이 차감되는 시나리오 포함 4종의 회귀 테스트 통과 (100% Pass).

[제목] 🌙 지금이 기회! 골든 아워 시작
[본문]
- 지금부터 딱 1시간 동안만!
- 모든 게임 보상이 2배로 터집니다.
- 행운의 주인공 '골든 티켓' 당첨 기회까지 놓치지 마세요.
[보상 안내]
- 2배 부스트: 즉시 적용
- 골든 티켓: 추후 공지
[기술 사양 및 경로]
- **백엔드 로직**: `app/services/vault_service.py` (배수 로직), `app/services/vault2_service.py` (설정 제어)
- **상세 테스트 파일**: `tests/test_vault_earn_event_game.py` (KST 시간대 및 배수 적용 검증)
- **UI 구성 및 경로**:
  - 진입 팝업: `src/components/events/GoldenHourPopup.tsx`
  - 카운트다운 타이머: `src/components/layout/GoldenHourTimer.tsx`
  - 헤더 통합: `src/components/layout/AppHeader.tsx`
  - 어드민 제어 보드: `src/admin/pages/VaultAdminPage.tsx`

[사전 준비]
- 모니터링용 어드민 페이지(Events Status Board) 접속 상태 유지
- 테스트 계정 준비 (이벤트 시작 전/후 비교용)
[시나리오]
1) 시작 타이밍 (21:30)
- 21:30 정각, 어드민 대시보드 `is_golden_hour_active`가 **ON(초록불)**로 자동 전환되는지 확인
- 앱 내 상단 타이머/배너 노출 여부 확인
2) 부스트 혜택 검증
- 이벤트 타임 내 게임 플레이 시 **2.0x 배수** 적용 여부 (결과 화면 또는 로그 확인)
- 참여 기록이 어드민 `Golden Hour Peak` 카운트에 집계되는지 확인
3) 종료 타이밍 (22:30)
- 22:30 이후 플레이 시 혜택 종료(1.0x 복귀) 확인
- 어드민 상태 **OFF** 전환 확인




SLOT-C
[이벤트명] 웰컴미션 4종 미션이벤트 / 현재진행중
[한 줄 소개]
- 신규 유저가 초기 정착을 위해 4가지 미션을 수행하면 총 10,000원의 금고 적립금을 드립니다.
[목표]
- 초반 핵심 기능(게임 플레이, 커뮤니티 연동, 재접속) 경험 유도
- 금고(Vault)에 초기 자산을 쌓아줌으로써 리텐션 강화
[기간]
- 상시 운영 (신규 가입 유저 한정)
- 상태: 활성화 (✅ 구현 완료: `MissionService`)
[참여 조건(핵심 규칙)]
1. **첫 게임 플레이**: 아무 게임이나 1회 플레이 (2,500원)
2. **게임 마스터 (3회)**: 게임을 3회 더 플레이 (2,500원)
3. **커뮤니티 함께하기**: 내 지갑(Wallet) 친구 공유 (2,500원) ✅ 수정 완료 (불안정한 Inline Query 제거)
4. **2일차 출석 체크**: 가입 다음 날 다시 접속 (2,500원)
[유저 화면 노출]
- 메인 홈: 웰컴 미션 진행 상태 바(Progress Bar) 노출
- 미션 탭: 'NEW_USER' 카테고리 내 4종 미션 우선 노출
- 완료 시: 축하 팝업 및 보상 수령 안내
[보상 설계]
- **보상**: 각 단계별 2,500원 금고 적립 (총 10,000원)
- **지급 방식**: 미션 완료 후 '수령' 버튼 클릭 시 `Vault`로 즉시 적립 (CASH_UNLOCK)
- **지급 확인**: 금고 내역에서 '신규유저 환영 보너스' 등 명목 확인 가능

[기술 사양 및 경로]
- **백엔드 로직**: `app/services/mission_service.py` (진척도 및 수령), `app/api/routes/auth.py` (출석 체크 연동)
- **상세 테스트 파일**: `tests/test_admin_mission_api.py`, `tests/repro_day2_login.py` (2일차 로그인 검증)
- **UI 구성 및 경로**:
  - 미션 페이지: `src/pages/MissionPage.tsx`
  - 미션 카드 컴포넌트: `src/components/mission/MissionCard.tsx`
[운영 체크(실행 전)]
- `scripts/seed_new_user_missions.py`를 통한 미션 데이터 정상 세팅 여부 확인
- 2일차 로그인 로직이 KST 자준 시스템(09:00 리셋 등)과 충돌 없는지 확인
[운영 중 모니터링]
- 각 단계별 전환율(CVR) 확인: 1단계 완료 후 4단계(2일차)까지 얼마나 도달하는지
- 보상 수령 후 실제 금고(Vault) 유동성(이자 수령 등)으로 이어지는지 확인
[FAQ(유저가 물어볼 것)]
- Q. 미션을 꼭 순서대로 해야 하나요? A. 아니요, 2일차 출석을 제외한 미션은 동시에 진행 가능합니다.
- Q. 보상은 언제 들어오나요? A. 미션 완료 후 '수령' 버튼을 누르는 즉시 금고로 입금됩니다.
[제목] 🎁 신규 유저를 위한 10,000원 환영 선물!
[본문]
- 지금 바로 4가지 미션을 완료해 보세요.
- 첫 게임부터 2일차 출석까지, 총 10,000원을 금고에 담아드립니다.
[보상 안내]
- 4단계 미션 완료 시: 총 10,000원 (각 단계별 2,500원)
[사전 준비]
- 신규 가입 테스트 계정
- `UserMissionProgress` 데이터 실시간 갱신 여부 확인
[시나리오]
1) 가입 후 첫 판
- 게임 종료 후 미션 1단계 완료 알림 및 보상 수령 확인
2) 커뮤니티 공유
- 스토리 공유 액션 후 미션 3단계 즉시 완료 확인
3) 다음 날 재방문
- 2일차 로그인 시 4단계 미션 활성화 확인


## 📅 2일차: 1월 5일 (월요일) - "환영 주간 (Welcome Week)"

월요일은 돌아온 유저들을 위한 **기초 자산(티켓/다이아)** 지급에 집중합니다.
### **Slot A: 일상 (Routine)**
[이벤트명] 매일 선물 (Daily Gift) ✅ 구현 완료

[한 줄 소개]
- 매일 접속만 해도 다이아 10개를 드립니다.
[목표]
- 유저의 매일 방문 유도 (Retention)
- 게임 플레이를 위한 기초 자산(다이아) 공급
[기간]
- 상시 (매일 00:00 ~ 23:59 KST)
[참여 조건(핵심 규칙)]
- 당일 00:00 ~ 23:59 사이 접속 시 미션 자동 완료 (`LOGIN` 액션)
- 미션 탭에서 '수령' 버튼 클릭 시 보상 지급
[유저 화면 노출]
- **홈 화면**: 로그인 시 "오늘의 선물 도착" 토스트 알림 (세션당 1회)
- **네비게이션**: 하단 '이벤트' 탭에 빨간색 핑(Ping) 알림
- **대시보드**: 미션 카드에 빨간색 느낌표(!) 배지 노출
- **미션 탭**: [Daily] 카테고리 최상단 고정 노출 및 골드 강조 스타일 적용
[보상 설계]
- **보상**: 10 다이아
- **지급 방식**: 미션 완료 수동 수령 (유저가 인지하게 함)
[운영 체크]
- 시딩 스크립트(`seed_daily_gift_mission.py`) 정상 실행 확인
- 미션 리스트 상단 고정 및 정렬(수령 가능 우선) 확인
- 보상 수령 시 인벤토리 반영 확인
[FAQ]
- Q. 어제 못 받은 거 오늘 받을 수 있나요? A. 아니요, 당일에만 가능해요.
- Q. 매일 주나요? A. 네, 매일 드립니다.
[시나리오]
1) 접속 및 수령
- 로그인 -> 홈 화면 토스트 확인 -> 하단 '이벤트' 알림 확인 -> 이벤트 탭의 미션 '!' 확인 -> 미션 탭 진입 -> '매일 선물' 최상단 노출 및 '수령' 버튼 활성화 확인 -> 클릭 시 다이아 10 증가



## 🛠 어드민 필수 체크포인트

1.  **골든 아워 모니터링 (매일 21:30)**:
    *   `AdminOpsDashboard` > Events 탭에서 `ON` (초록불) 확인.
    *   혹시 `OFF`라면 서버 시간 설정 문제일 수 있으므로 즉시 제보.

2.  **스트릭(Streak) 이탈자 관리 (매일 09:00)**:
    *   `Daily Overview` > `Risk Count` 확인.
    *   숫자가 높으면 [Nudge] 버튼 눌러서 리텐션 방어.

3.  **정산(Settlement) 확인 (매일 09:00)**:
    *   `Vault Payout Ratio`가 50%를 넘지 않는지 확인 (적자 경고).
