# 2025-12-28 Key Roulette & Infrastructure Standardization

## Overview
Implemented the "Key-Exclusive Roulette" system featuring Gold and Diamond Key tiers with specialized reward tables. Additionally, standardized the entire local development environment's security credentials to `2026` for ease of maintenance.

## üöÄ Features

### Key-Exclusive Roulette
-   **Multi-Tier System**: Enabled support for **Gold Key** ("Í≥®Îìú ÌÇ§") and **Diamond Key** ("Îã§Ïù¥ÏïÑ ÌÇ§") alongside the existing Ticket ("ÏùºÎ∞ò Î£∞Î†õ") mode.
-   **Specialized Probability**:
    -   **Gold Roulette**: 60% chance of 5,000 P.
    -   **Diamond Roulette**: Higher tier rewards (up to 200,000 P), with adjusted probabilities for jackpots.
-   **Database**: Added `ticket_type` to `roulette_config` to link specific tables to specific tokens.
-   **Frontend**: Implemented a **Tabbed Interface** with dynamic theming (Amber/Cyan) based on the selected roulette mode.

### Infrastructure Standardization
-   **Unified Credentials**:
    -   Updated MySQL Root Password: `2026`
    -   Updated Application User Password: `2026`
    -   Synced `.env` and `docker-compose.yml` to reflect these defaults.
-   **Live Migration**: Executed SQL scripts to update running database user credentials without downtime.

## üõ† Fixes & Cleanup
-   **DB Schema**: Fixed `user_game_wallet_ledger` ENUM definition to support `GOLD_KEY` and `DIAMOND_KEY`.
-   **Test Fixes**: Corrected import paths and method calls in integration test scripts.

## ‚úÖ Verification & Testing
-   **Integration Test**: Created and executed `tests/verify_key_roulette.py` inside the backend container.
    -   Verified granting of 5 Gold/Diamond Keys.
    -   Verified correct token consumption upon play.
    -   Verified reward distribution logic.
-   **Connection Test**: Confirmed successful DB connection using the new `2026` password via the verification script.

## üìù Artifacts
-   `walkthrough.md`: Updated with deployment steps and password change notice.
-   `scripts/seed_key_roulette.sql`: Data seeding script for new roulette modes.
-   `scripts/fix_ledger_enum.sql`: Schema repair script for ledger table.
