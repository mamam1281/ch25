# 2026 Daily Mission System v6 (Grand Cycle & Lock-up)

> 목적: 단순 보상을 넘어 유저를 시스템에 장기적으로 묶어두는 **락업(Lock-up)** 장치와 **자산 그랜드 사이클** 구체화.
> 원칙: 유저가 들어왔을 때 "지금 바로 할 수 있는 것"을 극대화하고, 체리피커를 방어하며 진성 유저를 필터링한다.


😀2. 실시간 증명(금고 적립 연출/잭팟 피드)로 “살아있는 서비스” 느낌 강화 (1/7일 이후 개발)
😀3. 플래시 미션(타임어택)로 단기 트리거 제공 (1/7일 이후 개발)
### Phase 2. 경제/락업(Grand Cycle)로 장기 고착
1. 😀1주:4주:12주 자산 사이클 설계 (1/7일 이후 개발)
2. 😀체리피커 방어(레벨/승인/필터링) 운영 룰 적용 (1/7일 이후 개발)
### 6.4 Stars(선택) 결제 루프 [1/7일 이후 개발]
- **Stars 기반 미션 부스트**: ‘즉시 완료’ 또는 24시간 ‘부스터’ 등 원탭 결제 루프(선택적으로 도입).
## 2) Phase 0 — 콘텐츠 공백(Gap) 해소: Instant Action

> 유저가 진입했을 때 “준비 중”이 아닌 “지금 당장 할 것”을 제공하여 첫 3초의 이탈을 막습니다.

### 2.1 3초 이내의 성공 경험 (Immediate One-Tap)
- **일일 환영 선물 (Daily Instant Gift)**: 
   앱 진입 즉시 버튼 한 번으로 티켓/다이아 수령. (미션 보드로 유도)
- **성공 경험 선지급**: 복잡한 게임 미션 이전에 “입장 완료” 보상을 먼저 주어 유저에게 ‘진척감’ 부여.
   **일일 환영 선물(원탭)** | 부분 구현(옵션) 
  `src/components/layout/SidebarAppLayout.tsx` + `src/config/featureFlags.ts`
   ( `VITE_ENABLE_TRIAL_GRANT`) / `app/api/routes/trial_grant.py` / `app/services/trial_grant_service.py` 
  기본값 OFF. “원탭 받기” UI는 별도 버튼 형태로는 없음(현재는 자동 1회 지급 흐름). 

<기존유저용>
현재 시스템이 '완성형'을 지향하다 보니, 유저가 진입했을 때 
**"지금 바로 할 수 있는 것"**이 부족하다는 문제를 해결합니다.

### 1. "3초 이내의 성공" (Immediate One-Tab)
- **일일 환영 보상 (Instant Gift)**: 앱 진입 시 
- 복잡한 미션 달성 조건 없이 버튼 한 번으로 소량의 티켓이나 다이아를 즉시 지급하는 UI 배치.
- **성공 경험의 선지급**: "게임 5판" 미션을 주기 전에, 
- "입장 완료" 미션으로 이미 보상을 한 번 주고 시작하여 '진축감'을 형성.

### 2. "미래 정산" -> "실시간 증명" (Live Proof)
**실시간 잭팟 피드**: PvP 히스토리 대신, "누구가 방금 금고에서 5만 포인트를 출금 신청했습니다!"라는 시스템 알림 팝업을 상단에 띄워 '실제로 돌아가는 판'임을 증명.

### 3. "플래시 미션" (Flash Mission)
- **10분 타임어택**: "지금부터 10분 내에 다이스 1판 플레이 시 티켓 3장!"과 
- 같은 짧은 주기의 트리거형 콘텐츠 도입.
- **유령 시간대 방어**: 접속자 수가 적은 시간대에 자동으로 발동되는 '피크타임 부스터' 연동.

### 4. 체감형 콘텐츠 갭 보완
- **미션 = 게임화**: 미션 리스트를 단순 체크리스트가 아닌, 
- '지도' 형태나 '스탬프 북'처럼 시각적으로 즐거운 경험으로 리팩토링.
- **티켓 제로 구출의 게임화**: 티켓이 없을 때 광고를 보는 대신, 
- 봇과의 간단한 가위바위보 등을 통해 티켓을 얻는 '미니 콘텐츠' 추가.
😀**실시간 잭팟 피드**: [1월 7일 이후 개발예정]
  PvP 히스토리 대신, 타 유저의 실시간 출금/당첨 소식을 상단 팝업으로 노출
  **실시간 잭팟 피드** | 미구현 | (검색 기준 관련 UI/route 없음) 
  “누가 방금 출금/당첨” 팝업 피드는 현재 프론트에 구현 흔적이 없음. |

😀**티켓 제로 구출**: 티켓이 0일 때 즉시 발동되는 ‘광고 시청’ 또는 ‘초간단 미니게임’ 루프.
| **티켓 제로 구출 루프** | 미사용(비활성) | `src/components/game/TicketZeroPanel.tsx` 
| 컴포넌트가 `return null; // Feature temporarily disabled`로 비활성화되어 실제 UI가 노출되지 않음.

😀### 2.3 플래시 미션 (Flash Mission)
- **타임어택**: “지금부터 15분 내에 다이스 1판 플레이 시 2배 보상”과 같은 단기 트리거.
| **플래시 미션(타임어택)** | 미구현 | (검색 기준 관련 모델/스케줄/UI 없음) 
| 시간 제한 미션 정의/집계/노출/만료 처리 전부 TODO. |
## 5) Phase 2 — 운영 전략 기반 미션 확장 (Grand Cycle)

> 단순 보상을 넘어 유저를 시스템에 장기적으로 묶어두는 락업(Lock-up) 장치.

### 5.1 자산 그랜드 사이클 (1주:4주:12주)
- **[연속] 브릿지 주간 생전 미션**: 12/25~12/31 매일 참여 시 1월 시드(30,000원) 지급. (장기 고착 시발점)
- **[누적] 월간 금고 해방**: 한 달간 미션 100회 완료 시 월간 금고(Gold) 인출 권한 +20% 해금.
- **[장기] Diamond Key 수집가**: 분기별 스페셜 미션 완수 시 Grand Vault 최종 열쇠 지급.

### 5.2 체리피커 방어 및 진성 유저 필터링
- **무제한 티켓 공급**: 신규/저레벨 유저(Lv.1~6)에게는 티켓 번들을 무제한 공급하여 활동성 확보.
- **고가치 보상 잠금(Tiered Rewards)**: Lv.7 이상의 고가치 미션은 ‘관리자 승인 대기’ 상태를 거치도록 설계하여 수동 검토 및 부정행위 방지.
### 보류 항목(원문 유지)
- PvP 히스토리 구현: 글로벌 실시간 승패 피드(참고 이미지 기반)
- 자동프로필 구현 - 완료 

---

## v5 미구현 구간 구현 현황 체크 (2026-01-01)

> 기준: 이 문서의 마커(“여기까지가 v5에서 구현되지 못한 내용”) **이전**에 등장하는 항목을 대상으로,
> repo 내 “라우트/서비스/컴포넌트/플래그” 존재 여부를 근거로 체크.

- 범례
    - ✅: 구현/사용 중
    - 🟡: 부분 구현(옵션/백엔드만/비활성/뼈대)
    - ❌: 미착수(디벨롭 단계 전: 관련 모델/라우트/UI/스케줄이 없음)

| 항목 | 상태 | 근거(코드/문서) | 비고 |
|---|---:|---|---|
| 일일 환영 선물(Daily Instant Gift / Trial Grant) | 🟡 |
 `src/config/featureFlags.ts` (`VITE_ENABLE_TRIAL_GRANT`), `app/api/routes/trial_grant.py`, `app/services/trial_grant_service.py` | 기본값 OFF. “원탭 버튼 UI”는 별도 없음(자동 1회 지급 흐름). |
| 티켓 제로 구출 루프(TicketZero) | 🟡 | `src/components/game/TicketZeroPanel.tsx` 상단 `return null`로 비활성, (페이지들에서 import 흔적 있음) | 기능 뼈대는 있으나 현재 UI 노출 X. |
| 실시간 증명(잭팟/출금/금고 피드 팝업) | 🟡 | 백엔드 데이터 엔드포인트 존재: `app/api/routes/vault.py`의 `/api/vault/top`, `/api/vault/admin/requests` | 프론트에서 해당 feed/popup을 호출/표시하는 UI 흔적은 확인되지 않음(즉, UX는 미착수 수준). |
| 플래시 미션(타임어택) | ❌ | (검색 기준 관련 모델/스케줄/UI 없음) | 시간 제한 미션 정의/집계/노출/만료 처리 전부 TODO. |
| 1주:4주:12주 자산 사이클(Grand Cycle) | 🟡 | Vault UX용 룰 payload는 존재: `app/services/vault_service.py#phase1_unlock_rules_json`의 `grand_cycle_unlock`, `src/utils/vaultUtils.ts` 파싱/표시 | “미션 기반 1주/4주/12주 트래킹/지급”은 별도 구현 근거 없음. |
| 체리피커 방어(레벨/승인 대기/필터링) | 🟡 | 미션 progress에 `approval_status`, 미션에 `requires_approval` 필드 노출 흔적: `app/services/mission_service.py` | 현재 `claim_reward` 흐름에서 “승인 대기 상태로 전환/어드민 승인 후 지급” enforcement는 확인되지 않음. |
| Stars 결제 루프 | ❌ | (검색 기준 결제 플로우/라우트/UI 없음) | 추후 선택 구현 항목. |
| PvP 히스토리(글로벌 승패 피드) | ❌ | 보류 항목으로만 존재(구현 근거 없음) | |


--------여기까지가 v5에서 구현되지 못한 내용 --------
--------여기부터는 v6에서 v5 구현되지 못한 내용을 디벨롭 --------


## 0) 핵심 업데이트 (v6 추가 사항)

1.  **다이아몬드 키 사용처**: 미션으로 획득한 다이아몬드 키를 사용하여 *다이아몬드 룰렛*를 여는 메커니즘.
2.  **다이아몬드 키를 이용해 유저 이용 4주차에 빅 금고 3/5/10만원이 들어있는 빅금고 오픈 기회 제공**.
3.  **자산 그랜드 사이클 (1주:4주:12주)**:
    *   **1주 (Bridge)**: 매일 참여 시 신년 시드권 지급.
    *   **4주 (Monthly)**: 미션 100회 달성 시 금고 인출 권한 해금 보너스.
    *   **12주 (Quarterly)**: 최종 잭팟 열쇠 완성.
4.  **체리피커 방어 (Lv.7 필터링)**:
    *   저레벨(Lv.1~6): 무제한 활동권(티켓 번들) 공급으로 유입 극대화.
    *   고레벨(Lv.7+): 고가치 미션 보상에 **관리자 승인 대기** 단계 도입.

---

## 1) Grand Cycle (자산 선순환 구조)

### 1.1 자산 그랜드 사이클 상세
- **[연속] 브릿지 주간 생존 미션 (1/1~1/7)**
    *   대상: 기간 내 매일 1개 이상의 미션을 완료한 유저.
    *   보상: 1월 1일 가동 시드 **26,000원** (현금성 포인트) 지급.
    *   효과: 신년 1/1 런칭 후 이탈 방지 및 초기 자산 형성 지원.
- **[누적] 월간 금고 해방 (Monthly Goal)** - 다이아몬드 키 이용
    *   조건: 한 달간 누적 미션 **100회 완료**.
    *   보상: **월간 금고(Gold Vault) 인출 권한*.
    *   효과: 꾸준한 미션 수행 동기부여 및 대량 출금 락업 해소.
---

## 2) 체리피커 방어 및 진성 유저 필터링

### 2.1 단계별 활동 제어
- **무제한 티켓 공급 (Lv.1~6)**
    *   신규 및 저레벨 유저에게는 활동성이 끊기지 않도록 **무료 티켓 번들**을 지속적으로 공급. ??? 
    *   일일 미션 리셋과 별개로 티켓 0 시 즉시 충전 미션 활성화 ?? 어떻게 
- **고가치 보상 잠금 (Tiered Rewards, Lv.7+)**
    *   보상이 큰 미션(고액 다이아, 현금성 포인트 등)은 **Lv.7 이상**부터 노출되거나, 참여 가능.
    *   Lv.7 이상의 보상을 '수령(Claim)' 시 **'관리자 승인 대기'** 상태로 전환.
    *   관리자는 어드민 패널에서 비정상 플레이 여부 검토 후 보상 최종 지급 처리.


- **Grand Vault 인터페이스**:
    *   금고 탭 내 '열쇠 구멍' 인터페이스 배치.
    *   키 보유 시에만 '열기' 시도 가능 (확률형 또는 확정형 잭팟).

---

## 4) 운영 우선순위 (V6 기준)

### Phase 2.1 (즉시 실행 가능)
- [ ] **기존 유저 Instant Action 보강**: 앱 진입 시 "오늘의 선물" 팝업 및 원탭 수령 UI.
- [ ] **티켓 제로 구출 게임화**: 티켓 0일 때 간단한 탭 게임으로 티켓 충전.

### Phase 2.2 (Grand Cycle 구현)
- [ ] **브릿지 미션 트래킹**: 1/1~1/7 연속 참여 여부 체크 로직.
- [ ] **누적 미션 카운터**: 월간 100회 카운팅 및 해금 보너스 로직.

### Phase 2.3 (Admin Enforcement)
- [ ] **Admin 승인 단계**: `MissionProgress`에 `PENDING_APPROVAL` 상태 추가 및 어드민 UI 연동.
- [ ] **레벨 게이팅**: 미션 보드에서 특정 레벨 미만 고가치 미션 블로킹.

---

## 5) 기술 체크리스트 (Tech-V6)

- **DB**:
    - `user_mission_progress` 테이블에 `status` (PENDING, APPROVED, CLAIMED) 추가 고려.
    - `User` 테이블에 `diamond_key_count` 또는 `inventory` 필드 확장.
- **Backend**:
    - `MissionService.claim_reward` 호출 시 레벨 및 보상 규모에 따른 `PENDING` 처리 로직.
    - 12/31 -> 1/1 시드권 자동 지급 스케줄러 개발.
- **Frontend**:
    - 미션 카드에 '승인 대기 중' 상태 레이블 및 툴팁 추가.
    - 앱 상단 '실시간 잭팟/출금' 피드 UI (Live Proof).
    - 다이아몬드 키 전용 상점 또는 금고 언락 페이지 UI.
