# 텔레그램 미니앱(TMA) 기능 활용도 보고서

이 보고서는 "2026/ch25" 프로젝트의 현재 텔레그램 미니앱 통합 상태를 정리하고, 현재 활용되지 않거나 누락된 핵심 플랫폼 기능들을 식별합니다.

## 현재 구현 상태
*   **인증**: `initData`를 사용한 자동 로그인이 정상적으로 작동합니다.
*   **화면 확장**: 초기화 시 WebApp이 `expand()`로 설정되어 전체 화면 모드로 실행됩니다.
*   **햅틱(진동)**: 기본적인 햅틱 유틸리티 래퍼는 구현되어 있으나, 앱 전반에 걸친 사용은 일관적이지 않습니다.
*   **테마 감지**: `colorScheme`에 기반한 단순한 `data-theme` 속성 적용이 구현되어 있습니다.

---

## 🚀 활용도가 낮거나 누락된 기능

### 1. 통합 내비게이션 (BackButton & MainButton)
텔레그램은 웹사이트가 아닌 "완전한 앱"처럼 느껴지게 하는 네이티브 UI 요소를 제공합니다.
*   **뒤로가기 버튼(BackButton)**: 현재는 앱 내부의 "뒤로가기" 버튼이나 스와이프에 의존하고 있습니다. 하위 페이지(복권, 룰렛, 팀 배틀)에 네이티브 `BackButton`을 구현하면 일관된 사용자 경험(UX)을 제공할 수 있습니다.
*   **메인 버튼(MainButton)**: 주요 동작에 매우 중요한 요소입니다. 화면 하단에 플로팅 버튼을 만드는 대신, 텔레그램의 `MainButton`을 사용하면 기기 화면 하단에 네이티브하게 고정되어 훨씬 고급스러운 조작감을 제공합니다.

### 2. 네이티브 알림 및 확인창
표준 브라우저 `alert()`나 커스텀 HTML 모달 대신 텔레그램 전용 기능을 사용할 수 있습니다.
*   **`showConfirm`**: 중요한 동작(예: "티켓 10개를 소모하여 게임을 시작하시겠습니까?")에 사용합니다.
*   **`showAlert`**: 치명적인 오류나 공지사항에 사용합니다.
*   **`showPopup`**: 최대 3개의 버튼을 가진 유연한 커스텀 팝업을 제공하며, 텔레그램 UI와 완벽하게 통합됩니다.

### 3. 심층 테마 통합 (`ThemeParams`)
현재는 단순히 `밝음(light)`과 `어두움(dark)`만 감지하고 있습니다. 텔레그램이 제공하는 세부 `ThemeParams`(배경색, 버튼색, 링크색 등)를 충분히 활용하지 못하고 있습니다.
*   **제안**: 텔레그램의 CSS 변수(예: `--tg-theme-button-color`)를 프로젝트의 디자인 시스템 토큰과 직접 매핑해야 합니다.

### 4. 직접 공유 및 결과 초대
복권이나 룰렛 게임은 소셜 기능과 밀접합니다.
*   **공유**: `switchInlineQuery`나 `share` 기능을 사용하여 사용자가 큰 당첨 결과를 자신의 "나와의 채팅"이나 특정 그룹에 직접 보낼 수 있게 합니다.
*   **스토리 통합**: TMA API를 통해 게임 결과를 텔레그램 스토리에 네이티브하게 공유할 수 있습니다.

### 5. 백엔드 봇 참여 (Engagement)
현재 `telegram_bot` 서비스는 단순히 앱 실행 버튼을 보내는 "입구" 역할만 하고 있습니다.
*   **알림**: 사용자의 쿨타임이 종료되었을 때나, 팀 배틀에서 순위가 변동되었을 때 봇이 개인화된 메시지를 보낼 수 있습니다.
*   **메뉴 버튼**: 현재는 "시작" 버튼이 유일한 재진입 방법일 수 있습니다. 봇의 메뉴 버튼을 "2026 플레이하기"로 커스텀하여 접근성을 높일 수 있습니다.

### 6. 클라우드 스토리지 API
데이터베이스 저장이 필요 없는 사소한 사용자 설정에 유용합니다.
*   **사용 예**: 사운드/음악 토글 상태, 튜토리얼 확인 여부, UI 레이아웃 선호도 등을 저장할 수 있습니다. 이는 무료이며 속도가 매우 빠릅니다.

---

## 🛠 실행 계획 (Action Plan)

| 기능 | 난이도 | 영향력 | 우선순위 |
| :--- | :--- | :--- | :--- |
| **메인 버튼** (플레이/수령) | 낮음 | 높음 | 🔥 최우선 |
| **뒤로가기 버튼** | 낮음 | 중간 | ✅ 높음 |
| **테마 매핑** | 중간 | 중간 | 🌕 보통 |
| **봇 알림 기능** | 높음 | 높음 | ✅ 높음 |
| **그룹 공유 기능** | 중간 | 높음 | 🌕 보통 |

---

## 💎 심화 확장 가능성 (Advanced Expansion)

기본적인 UI 통합을 넘어, 서비스의 비즈니스 모델이나 몰입감을 극대화할 수 있는 심화 기능들입니다.

### 1. 하드웨어 센서 활용 (가속도계/자이로스코프)
*   **다이스 게임 혁신**: 화면의 버튼을 누르는 대신, **사용자가 폰을 직접 흔들어 주사위를 던지는** 액션을 구현할 수 있습니다. 텔레그램 API는 장치의 가속도 데이터를 실시간으로 제공합니다.
*   **룰렛 상호작용**: 폰을 기울여서 룰렛의 속도를 조절하는 등의 물리 기반 상호작용이 가능합니다.

### 2. 텔레그램 별(Stars) 결제 시스템
*   **인앱 결제**: 구글/애플 결제 시스템 대신 텔레그램 자체 가상 통화인 'Stars'를 사용하여 티켓을 판매하거나 유료 아이템을 제공할 수 있습니다. 수수료가 낮고 결제 과정이 매우 간편합니다.
*   **리워드 환전**: 특정 조건을 달성한 사용자에게 별(Stars)을 리워드로 지급하는 모델로 확장 가능합니다.

### 3. 바이오메트릭 인증 (Biometric Manager)
*   **보안 강화**: 고가의 경품을 수령하거나 중요한 자산을 이동할 때, 텔레그램의 네이티브 지문 인식 또는 FaceID를 호출하여 보안을 강화할 수 있습니다. 별도의 비밀번호 입력 없이도 강력한 보안을 체감하게 합니다.

### 4. 광고 수익화 (Telegram Ads Integration)
*   **수익 창출**: 미니앱 플랫폼 내에서 직접 텔레그램 광고를 노출하여 수익을 창출하거나, 다른 미니앱으로의 유입을 유도하는 크로스 프로모션이 가능합니다.

### 5. TON 지갑 및 Web3 통합
*   **Web3 확장**: 텔레그램에 내장된 TON 스페이스(Wallet)와 연동하여 사용자의 온체인 자산을 확인하거나, 이벤트 포인트를 실제 토큰(NFT 등)으로 발행하여 전송할 수 있습니다.

### 6. 텔레그램 채널/그룹 도구 (Chat Integration)
*   **길드 시스템**: 팀 배틀을 텔레그램 채널과 연동하여, 채널 소식(메시지)이 미니앱 내 전광판에 실시간으로 흐르게 하거나 미니앱 내에서 바로 해당 채널로 메시지를 보낼 수 있습니다.

---

> [!IMPORTANT]
> 특히 **가속도계(자이로스코프)**를 활용한 주사위 게임과 **텔레그램 별(Stars)**을 이용한 경제 시스템 도입은 사용자에게 일반 웹앱과는 차원이 다른 '플랫폼 경험'을 선사할 것입니다.

> [!TIP]
> 룰렛의 "돌리기"나 복권의 "긁기" 동작에 **메인 버튼(MainButton)**을 통합하면, 모바일 환경에서 앱의 완성도가 즉시 2배 이상 높아지는 효과를 볼 수 있습니다.
