# 텔레ID → 유저 닉네임 수동 매칭 SOP (자동화 없이 효율 2배)

작성일: 2026-01-01
목적: 텔레그램에서 들어온 문의/정산/지급 요청을 **telegram_id 기반으로 빠르게 유저 계정에 매칭**하고, 실수/중복 지급을 막는다.

핵심 전제(코드 기준):
- `user.telegram_id`(숫자 BigInteger)가 존재하며 인덱스/유니크다.
- 어드민 유저 검색(q)에 **telegram_id 숫자 검색**이 가능해야 한다. (이번에 추가됨)

---

## 0) 매칭 규칙(실수 방지)
- 단일 신원 기준은 `telegram_id`(숫자)로 한다.
- `telegram_username`은 바뀔 수 있으므로 보조 정보로만 본다.
- 매칭이 애매하면 “보류”로 두고 지급하지 않는다.

---

## 1) 수동 매칭 작업 흐름(최단 루트)

### Step 1) 입력값 확보(텔레그램에서)
- 확보: `telegram_id(숫자)`, `텔레 닉/username`, 요청 내용(지급/정산/문의)
- 가능하면 추가로: 앱 내 닉네임/스크린샷 1장

### Step 2) 어드민에서 유저 찾기
- 어드민 유저 목록 검색창에 `telegram_id` 숫자 그대로 붙여넣기
- 결과:
  - 1명 매칭 → 다음 단계
  - 0명 → “미연결(telegram_id 미저장)” 케이스로 분류
  - 2명 이상 → 원칙적으로 발생하면 안 됨(유니크) → 즉시 보류/확인

### Step 3) 계정 검증(30초 규칙)
- 최소 검증 2개 중 1개만 통과해도 OK:
  - A) 텔레 username/닉과 앱 닉네임이 유사
  - B) 요청 내용(지급/정산)이 보유 기록과 일치(운영 엑셀/키핑 기준)
- 둘 다 불일치 → 보류

### Step 4) 기록 남기기(중복 방지)
- 아래 “작업 큐 템플릿”에 한 줄 기록
- 메모 규칙: “요청일/요청내용/검증수단/담당자”를 남김

---

## 2) ‘미연결(telegram_id 미저장)’ 케이스 처리
- 원인: 텔레에서 DM을 보냈지만 계정에 telegram_id가 연결되지 않았을 수 있음
- 처리 원칙:
  - 무조건 지급/정산을 진행하지 말고, **본인확인 자료(앱 닉네임/스크린샷/외부ID 등)**를 받아서 연결 후 처리

---

## 3) 작업 큐 템플릿(엑셀/시트에 그대로 복붙)

권장 컬럼:
- `requested_at`(요청시각)
- `telegram_id`(숫자)
- `telegram_username`
- `app_nickname`(확인된 닉)
- `user_id`(어드민 id)
- `case_type`(지급/정산/문의/미연결/보류)
- `verification`(A/B/스크린샷)
- `status`(대기/처리중/완료/보류)
- `owner`(담당자)
- `note`

---

## 4) 배치 처리 요령(효율 2배 포인트)
- (1) “요청 수집 30분” → (2) “매칭 30분” → (3) “처리 30분”로 시간을 쪼갠다
- 문의를 실시간으로 처리하지 말고, **핀 공지로 큐에 쌓아** 일괄 처리한다
- 우선순위: (1) 지급 대기 오래된 유저 (2) 고가치 유저 (3) 신규

